import{_ as L,a as D,b as B}from"./ViewIcon-OR__3BWO.js";import{a as x,L as I}from"./index-Cyx9wH0p.js";/* empty css              */import{N as T}from"./NotificationModal-BRD1dcli.js";import{_ as A,a as F,b as j}from"./EditCitaPage.vue_vue_type_script_setup_true_lang-WRmIziBn.js";import{d as U,e as o,m as q,o as r,c as d,a as t,F as w,s as H,b as v,u as O,x as S,y as W,t as p}from"./index-ZwJaeH-t.js";import"./Especialidades-Cb2kmacW.js";const G={class:"flex flex-col"},J={class:"overflow-x-auto"},K={class:"min-w-full inline-block align-middle"},Q={class:"overflow-hidden"},R={class:"min-w-full rounded-xl"},X={key:0,class:"divide-y divide-gray-300"},Y={class:"p-5"},Z={class:"p-5"},ee={class:"p-5"},te={class:"p-5"},se={class:"p-5 flex items-center space-x-3"},ae=["onClick"],oe=["onClick"],le=["onClick"],ie={key:1},ne="http://localhost:8080/Cita/ListadoCita",ge=U({__name:"VisualizarCitaAdministradorPage",setup(re){const y=o([]),l=o(""),n=o(""),a=o(!1),u=o(!1),g=o(!1),f=o(!1),h=o(!1),m=o({id_cita:0,fecha:"",hora:"",paciente:{id_paciente:0,nombrePaciente:"",apellidoPaciente:"",fechaNacimiento:"",generoPaciente:"",correoPaciente:"",telefonoPaciente:"",direccionPaciente:"",passwordPaciente:""},medico:{id_medico:0,nombreMedico:"",apellidoMedico:"",especialidadMedico:"",telefonoMedico:"",correoMedico:""}}),c=o(!1),M=e=>{g.value=!1,e&&e.message&&e.type?(l.value=e.message,n.value=e.type,a.value=!0,b()):a.value=!1},k=()=>{f.value=!1},V=e=>{f.value=!1,e&&e.message&&e.type?(l.value=e.message,n.value=e.type,a.value=!0,b()):a.value=!1},E=async e=>{_(e),setTimeout(()=>{c.value=!1,g.value=!0},1e3)},$=e=>{_(e),setTimeout(()=>{c.value=!1,h.value=!0},1e3)},P=e=>{_(e),setTimeout(()=>{c.value=!1,f.value=!0},1e3)},N=()=>{h.value=!1};async function _(e){c.value=!0;try{const s=await x.get(`http://localhost:8080/Cita/ListadoCita/${e.id_cita}`);Object.assign(m.value,s.data)}catch(s){x.isAxiosError(s)&&s.response?l.value=`Error al obtener los datos del paciente: ${s.response.data.message||s.message}`:l.value=`Error al obtener los datos del paciente: ${s instanceof Error?s.message:"Error desconocido"}`,n.value="error",a.value=!0}}async function b(){try{const e=await x.get(ne);y.value=e.data,e.data&&e.data.length>0?u.value=!0:u.value=!1}catch(e){u.value=!1,e.response?(l.value=e.response.data||"Error en el registro",n.value="error",a.value=!0):e.request?(l.value="No se recibió respuesta del servidor",n.value="error",a.value=!0):(l.value=`Error en la solicitud: ${e.message}`,n.value="error",a.value=!0)}}return q(()=>{b()}),(e,s)=>(r(),d(w,null,[t("div",G,[t("div",J,[t("div",K,[s[3]||(s[3]=t("div",{class:"relative text-gray-500 focus-within:text-gray-900 mb-4"},[t("div",{class:"absolute inset-y-0 left-1 flex items-center pl-3 pointer-events-none"})],-1)),t("div",Q,[t("table",R,[s[2]||(s[2]=t("thead",null,[t("tr",{class:"bg-gray-300"},[t("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize rounded-t-xl"}," Fecha "),t("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Hora "),t("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Paciente "),t("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Médico "),t("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize rounded-t-xl"}," Acciones ")])],-1)),u.value?(r(),d("tbody",X,[(r(!0),d(w,null,H(y.value,(i,z)=>(r(),d("tr",{key:z},[t("td",Y,p(i.fecha),1),t("td",Z,p(i.hora),1),t("td",ee,p(i.paciente.nombrePaciente),1),t("td",te,p(i.medico.nombreMedico),1),t("td",se,[t("img",{src:L,alt:"Edit Icon",onClick:C=>E(i),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-blue-200 hover:bg-blue-400 rounded-md"},null,8,ae),t("img",{src:D,alt:"Delete Icon",onClick:C=>P(i),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-red-200 hover:bg-red-400 rounded-md"},null,8,oe),t("img",{src:B,alt:"View Icon",onClick:C=>$(i),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-green-200 hover:bg-green-400 rounded-md"},null,8,le)])]))),128))])):(r(),d("tbody",ie,s[1]||(s[1]=[t("tr",null,[t("td",{colspan:"5",class:"text-center p-5"},[t("h1",{class:"text-xl font-semibold text-gray-500"},"No se encontraron registros"),t("p",{class:"text-gray-400 mt-2"},"Intenta ajustar tus filtros o buscar de nuevo.")])],-1)])))])])])])]),v(T,{message:l.value,type:n.value,visible:a.value,"onUpdate:visible":s[0]||(s[0]=i=>a.value=!1)},null,8,["message","type","visible"]),v(A,{"is-visible":h.value,cita:m.value,onClose:N},null,8,["is-visible","cita"]),v(O(I),{active:c.value,"can-cancel":!0,"is-full-page":!0},null,8,["active"]),v(F,{isVisible:f.value,onConfirm:V,onCancel:k,cita:m.value},null,8,["isVisible","cita"]),g.value?(r(),S(j,{key:0,cita:m.value,onClose:M},null,8,["cita"])):W("",!0)],64))}});export{ge as default};
