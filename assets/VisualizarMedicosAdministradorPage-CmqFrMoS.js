import{_ as U,a as B,b as F}from"./ViewIcon-OR__3BWO.js";import{N as O}from"./NotificationModal-BRD1dcli.js";import{a as E,L as z}from"./index-Cyx9wH0p.js";/* empty css              */import{d as V,e as d,o as f,c as x,a as e,y as T,b as p,u as j,F as C,f as P,z as W,w as K,r as S,h as _,t as u,m as G,s as H,x as J}from"./index-ZwJaeH-t.js";const Q={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},R=V({__name:"NotificationDeleteMedicoModal",props:{isVisible:{type:Boolean},medico:{}},emits:["confirm","cancel"],setup(k,{emit:y}){const m=k,c=d(""),s=d(""),o=d(!1),a=y,i=()=>{b()},M=()=>{a("cancel")},h=()=>{a("confirm",{message:c.value,type:s.value})},b=async()=>{o.value=!0;const r=`http://localhost:8080/Medico/EliminarMedico/${m.medico.id_medico}`;try{await E.delete(r),c.value="Medico eliminado con éxito",s.value="success"}catch{c.value="Error al eliminar al médico, tiene una cita pendiente",s.value="error"}finally{setTimeout(()=>{o.value=!1,h()},2e3)}};return(r,l)=>(f(),x(C,null,[r.isVisible?(f(),x("div",Q,[e("div",{class:"bg-white p-6 rounded-lg shadow-lg w-96"},[l[0]||(l[0]=e("h3",{class:"text-xl font-semibold mb-4 text-red-600"},"Alerta",-1)),l[1]||(l[1]=e("p",{class:"mb-6 text-center text-black"},"¿Estás seguro de la eliminación?",-1)),e("div",{class:"flex justify-end space-x-4"},[e("button",{onClick:M,class:"px-4 py-2 bg-gray-500 rounded-md"},"Cancelar"),e("button",{onClick:i,class:"px-4 py-2 bg-red-600 text-white rounded-md"},"Aceptar")])])])):T("",!0),p(j(z),{active:o.value,"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64))}}),X={class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Y={class:"bg-gray-100 rounded-lg shadow-lg w-2/3 p-6 text-black"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ee=V({__name:"EditMedicoPage",props:{medico:{}},emits:["close"],setup(k,{emit:y}){const m=k,c=y,s=d(!1),o=d(""),a=d(""),i=P({id_medico:0,nombreMedico:"",apellidoMedico:"",telefonoMedico:"",correoMedico:"",passwordMedico:"",especialidadMedico:""}),M=()=>({nombre:i.nombreMedico,apellido:i.apellidoMedico,correo:i.correoMedico,telefono:i.telefonoMedico});Object.assign(i,m.medico),W(()=>m.medico,r=>{r&&Object.assign(i,r)});const h=()=>{c("close",{message:o.value,type:a.value})};async function b(){s.value=!0;try{const r=M(),l=await E.put(`http://localhost:8080/Medico/ActualizarMedico/${i.id_medico}`,r);l.status>=200&&l.status<300&&(o.value="Medico actualizado exitosamente",a.value="success")}catch(r){if(r.response){const l=r.response.data;r.response.status===409?o.value=l:o.value="Error al actualizar: "+l,a.value="error",console.log(o.value,a.value)}else r.request?(console.error("No se recibió respuesta del servidor:",r.request),o.value="No se recibió respuesta del servidor",a.value="error"):(console.error("Error en la solicitud:",r.message),o.value=`Error en la solicitud: ${r.message}`,a.value="error")}finally{setTimeout(()=>{s.value=!1,h()},2e3)}}return(r,l)=>{const w=S("FormKit");return f(),x(C,null,[e("div",X,[e("div",Y,[l[5]||(l[5]=e("h2",{class:"text-2xl font-semibold mb-4 text-center text-black"},"Editar médico",-1)),p(w,{type:"form",onSubmit:b,class:"space-y-6",actions:!1},{default:K(()=>[e("div",Z,[p(w,{type:"text",name:"nombre",label:"Nombre",modelValue:i.nombreMedico,"onUpdate:modelValue":l[0]||(l[0]=v=>i.nombreMedico=v),"input-class":"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",validation:"required","input-error-class":"border-red-500","validation-class":"text-red-500 text-sm mt-1","validation-visibility":"blur","validation-messages":{required:"El nombre es obligatorio."},placeholder:"Ingrese el nombre"},null,8,["modelValue"]),p(w,{type:"text",name:"apellido",label:"Apellido",modelValue:i.apellidoMedico,"onUpdate:modelValue":l[1]||(l[1]=v=>i.apellidoMedico=v),"input-class":"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",validation:"required","input-error-class":"border-red-500","validation-class":"text-red-500 text-sm mt-1","validation-visibility":"blur","validation-messages":{required:"El apellido es obligatorio."},placeholder:"Ingrese el apellido"},null,8,["modelValue"]),p(w,{type:"email",name:"correo",label:"Correo Electrónico",modelValue:i.correoMedico,"onUpdate:modelValue":l[2]||(l[2]=v=>i.correoMedico=v),"input-class":"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",validation:"required|email","input-error-class":"border-red-500","validation-class":"text-red-500 text-sm mt-1","validation-visibility":"blur","validation-messages":{required:"El correo es obligatorio.",email:"Ingrese un correo válido."},placeholder:"Ingrese el correo electrónico"},null,8,["modelValue"]),p(w,{type:"tel",name:"telefono",label:"Teléfono",modelValue:i.telefonoMedico,"onUpdate:modelValue":l[3]||(l[3]=v=>i.telefonoMedico=v),modelModifiers:{trim:!0},"input-class":"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black","input-error-class":"border-red-500","validation-class":"text-red-500 text-sm mt-1",validation:"required|matches:/^[0-9]{3}-[0-9]{3}-[0-9]{4}$/","validation-messages":{required:"El teléfono es obligatorio.",matches:"El formato debe ser xxx-xxx-xxxx"},placeholder:"000-000-000"},null,8,["modelValue"])]),l[4]||(l[4]=e("br",null,null,-1))]),_:1}),l[6]||(l[6]=e("br",null,null,-1)),e("div",{class:"flex justify-end space-x-4"},[e("button",{type:"button",onClick:h,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition"},"Cancelar"),e("button",{type:"submit",onClick:b,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"},"Guardar")])])]),p(j(z),{active:s.value,"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}}),oe={key:0,class:"fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50"},te={class:"bg-white rounded-lg shadow-lg w-11/12 md:w-1/3 p-6"},le={class:"text-gray-700 space-y-2"},se=V({__name:"ViewMedicoPage",props:{medico:{},isVisible:{type:Boolean}},emits:["close"],setup(k,{emit:y}){const m=y;function c(){m("close")}return(s,o)=>s.isVisible?(f(),x("div",oe,[e("div",te,[o[7]||(o[7]=e("h2",{class:"text-xl font-semibold text-black mb-4 text-center"},"Detalles del Médico",-1)),e("ul",le,[e("li",null,[o[0]||(o[0]=e("strong",null,"ID:",-1)),_(" "+u(s.medico.id_medico),1)]),e("li",null,[o[1]||(o[1]=e("strong",null,"Nombre:",-1)),_(" "+u(s.medico.nombreMedico),1)]),e("li",null,[o[2]||(o[2]=e("strong",null,"Apellido:",-1)),_(" "+u(s.medico.apellidoMedico),1)]),e("li",null,[o[3]||(o[3]=e("strong",null,"Especialidad:",-1)),_(" "+u(s.medico.especialidadMedico),1)]),e("li",null,[o[4]||(o[4]=e("strong",null,"Télefono:",-1)),_(" "+u(s.medico.telefonoMedico),1)]),e("li",null,[o[5]||(o[5]=e("strong",null,"Correo:",-1)),_(" "+u(s.medico.correoMedico),1)]),e("li",null,[o[6]||(o[6]=e("strong",null,"Contraseña:",-1)),_(" "+u(s.medico.passwordMedico),1)])]),e("div",{class:"mt-6 flex justify-center"},[e("button",{onClick:c,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400"}," Aceptar ")])])])):T("",!0)}}),ie={class:"flex flex-col"},ae={class:"overflow-x-auto"},re={class:"min-w-full inline-block align-middle"},ne={class:"overflow-hidden"},de={class:"min-w-full rounded-xl"},ce={key:0,class:"divide-y divide-gray-300"},ue={class:"p-5"},me={class:"p-5"},pe={class:"p-5"},fe={class:"p-5"},be={class:"p-5"},ve={class:"p-5 flex items-center space-x-3"},ge=["onClick"],xe=["onClick"],ye=["onClick"],Me={key:1},he="http://localhost:8080/Medico/ListadoMedico",Ve=V({__name:"VisualizarMedicosAdministradorPage",setup(k){const y=d([]),m=d(!1),c=d(!1),s=d(""),o=d(""),a=d(!1),i=d(!1),M=d(!1),h=d(!1),b=d({id_medico:0,nombreMedico:"",apellidoMedico:"",especialidadMedico:"",telefonoMedico:"",correoMedico:"",passwordMedico:""}),r=t=>{$(t),setTimeout(()=>{c.value=!1,i.value=!0},1e3)},l=t=>{$(t),setTimeout(()=>{c.value=!1,M.value=!0},1e3)},w=t=>{$(t),setTimeout(()=>{c.value=!1,h.value=!0},1e3)},v=t=>{i.value=!1,t&&t.message&&t.type?(s.value=t.message,o.value=t.type,a.value=!0,N()):a.value=!1},A=()=>{M.value=!1},D=t=>{M.value=!1,t&&t.message&&t.type?(s.value=t.message,o.value=t.type,a.value=!0,N()):a.value=!1},I=()=>{h.value=!1};async function $(t){c.value=!0;try{const n=await E.get(`http://localhost:8080/Medico/ListadoMedico/${t.id_medico}`);Object.assign(b.value,n.data)}catch(n){E.isAxiosError(n)&&n.response?s.value=`Error al obtener los datos del paciente: ${n.response.data.message||n.message}`:s.value=`Error al obtener los datos del paciente: ${n instanceof Error?n.message:"Error desconocido"}`,o.value="error",a.value=!0}}async function N(){try{const t=await E.get(he);y.value=t.data,t.data&&t.data.length>0?m.value=!0:m.value=!1}catch(t){m.value=!1,t.response?(s.value=t.response.data||"Error en el registro",o.value="error",a.value=!0):t.request?(s.value="No se recibió respuesta del servidor",o.value="error",a.value=!0):(s.value=`Error en la solicitud: ${t.message}`,o.value="error",a.value=!0)}}return G(()=>{N()}),(t,n)=>(f(),x(C,null,[e("div",ie,[e("div",ae,[e("div",re,[n[3]||(n[3]=e("div",{class:"relative text-gray-500 focus-within:text-gray-900 mb-4"},[e("div",{class:"absolute inset-y-0 left-1 flex items-center pl-3 pointer-events-none"})],-1)),e("div",ne,[e("table",de,[n[2]||(n[2]=e("thead",null,[e("tr",{class:"bg-gray-300"},[e("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize rounded-t-xl"}," Nombre "),e("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Apellido "),e("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Especialidad "),e("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Télefono "),e("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Correo "),e("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize rounded-t-xl"}," Acciones ")])],-1)),m.value?(f(),x("tbody",ce,[(f(!0),x(C,null,H(y.value,(g,L)=>(f(),x("tr",{key:L},[e("td",ue,u(g.nombreMedico),1),e("td",me,u(g.apellidoMedico),1),e("td",pe,u(g.especialidadMedico),1),e("td",fe,u(g.telefonoMedico),1),e("td",be,u(g.correoMedico),1),e("td",ve,[e("img",{src:U,alt:"Edit Icon",onClick:q=>r(g),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-blue-200 hover:bg-blue-400 rounded-md"},null,8,ge),e("img",{src:B,alt:"Delete Icon",onClick:q=>l(g),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-red-200 hover:bg-red-400 rounded-md"},null,8,xe),e("img",{src:F,alt:"View Icon",onClick:q=>w(g),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-green-200 hover:bg-green-400 rounded-md"},null,8,ye)])]))),128))])):(f(),x("tbody",Me,n[1]||(n[1]=[e("tr",null,[e("td",{colspan:"5",class:"text-center p-5"},[e("h1",{class:"text-xl font-semibold text-gray-500"},"No se encontraron registros"),e("p",{class:"text-gray-400 mt-2"},"Intenta ajustar tus filtros o buscar de nuevo.")])],-1)])))])])])])]),p(R,{"is-visible":M.value,onConfirm:D,onCancel:A,medico:b.value},null,8,["is-visible","medico"]),i.value?(f(),J(ee,{key:0,medico:b.value,onClose:v},null,8,["medico"])):T("",!0),p(j(z),{active:c.value,"can-cancel":!0,"is-full-page":!0},null,8,["active"]),p(O,{message:s.value,type:o.value,visible:a.value,"onUpdate:visible":n[0]||(n[0]=g=>a.value=!1)},null,8,["message","type","visible"]),p(se,{"is-visible":h.value,medico:b.value,onClose:I},null,8,["is-visible","medico"])],64))}});export{Ve as default};
