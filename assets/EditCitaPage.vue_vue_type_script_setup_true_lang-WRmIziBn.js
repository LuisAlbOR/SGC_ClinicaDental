import{a as k,L as F}from"./index-Cyx9wH0p.js";/* empty css              */import{d as D,o as v,c as y,a as e,h as d,t as r,y as N,e as m,b as x,u as V,F as E,f as B,z as S,m as A,w as P,r as U,s as q}from"./index-ZwJaeH-t.js";import{e as I}from"./Especialidades-Cb2kmacW.js";const H={key:0,class:"fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50"},O={class:"bg-white rounded-lg shadow-lg w-11/12 md:w-1/3 p-6"},G={class:"text-gray-700 space-y-2"},oe=D({__name:"ViewCitaPage",props:{cita:{},isVisible:{type:Boolean}},emits:["close"],setup(w,{emit:C}){const i=w,c=C;function u(){c("close")}return(b,a)=>b.isVisible?(v(),y("div",H,[e("div",O,[a[11]||(a[11]=e("h2",{class:"text-xl font-semibold text-black mb-4 text-center"},"Detalles de la cita",-1)),e("ul",G,[e("li",null,[a[0]||(a[0]=e("strong",null,"ID:",-1)),d(" "+r(i.cita.id_cita),1)]),e("li",null,[a[1]||(a[1]=e("strong",null,"Fecha:",-1)),d(" "+r(i.cita.fecha),1)]),e("li",null,[a[2]||(a[2]=e("strong",null,"Hora:",-1)),d(" "+r(i.cita.hora),1)]),e("li",null,[a[3]||(a[3]=e("strong",null,"Paciente:",-1)),d(" "+r(i.cita.paciente.nombrePaciente+" "+i.cita.paciente.apellidoPaciente),1)]),e("li",null,[a[4]||(a[4]=e("strong",null,"Correo del paciente:",-1)),d(" "+r(i.cita.paciente.correoPaciente),1)]),e("li",null,[a[5]||(a[5]=e("strong",null,"Télefono del paciente:",-1)),d(" "+r(i.cita.paciente.telefonoPaciente),1)]),e("li",null,[a[6]||(a[6]=e("strong",null,"Género del paciente:",-1)),d(" "+r(i.cita.paciente.generoPaciente),1)]),e("li",null,[a[7]||(a[7]=e("strong",null,"Fecha de nacimiento del paciente:",-1)),d(" "+r(i.cita.paciente.fechaNacimiento),1)]),e("li",null,[a[8]||(a[8]=e("strong",null,"Dirección del paciente:",-1)),d(" "+r(i.cita.paciente.direccionPaciente),1)]),e("li",null,[a[9]||(a[9]=e("strong",null,"Médico:",-1)),d(" "+r(i.cita.medico.nombreMedico+" "+i.cita.medico.apellidoMedico),1)]),e("li",null,[a[10]||(a[10]=e("strong",null,"Especialidad del médico:",-1)),d(" "+r(i.cita.medico.especialidadMedico),1)])]),e("div",{class:"mt-6 flex justify-center"},[e("button",{onClick:u,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400"}," Aceptar ")])])])):N("",!0)}}),K={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ie=D({__name:"NotificationDeleteCitaModal",props:{isVisible:{type:Boolean},cita:{}},emits:["confirm","cancel"],setup(w,{emit:C}){const i=w,c=m(""),u=m(""),b=m(!1),a=C,M=()=>{console.log(i.cita.id_cita),n()},p=()=>{a("cancel")},f=()=>{a("confirm",{message:c.value,type:u.value})},n=async()=>{b.value=!0;const h=`http://localhost:8080/Cita/EliminarCita/${i.cita.id_cita}`;try{await k.delete(h),c.value="Cita eliminada con éxito",u.value="success"}catch{c.value="Error al eliminar la cita",u.value="error"}finally{setTimeout(()=>{b.value=!1,f()},2e3)}};return(h,g)=>(v(),y(E,null,[h.isVisible?(v(),y("div",K,[e("div",{class:"bg-white p-6 rounded-lg shadow-lg w-96"},[g[0]||(g[0]=e("h3",{class:"text-xl font-semibold mb-4 text-red-600"},"Alerta",-1)),g[1]||(g[1]=e("p",{class:"mb-6 text-center text-black"},"¿Estás seguro de la eliminación?",-1)),e("div",{class:"flex justify-end space-x-4"},[e("button",{onClick:p,class:"px-4 py-2 bg-gray-500 rounded-md"},"Cancelar"),e("button",{onClick:M,class:"px-4 py-2 bg-red-600 text-white rounded-md"},"Aceptar")])])])):N("",!0),x(V(F),{active:b.value,"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64))}}),W={class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},R={class:"bg-gray-100 rounded-lg shadow-lg w-2/3 p-6 text-black"},J={class:"space-y-4"},Q={class:"flex space-x-4"},X=["value"],Y=["value"],le=D({__name:"EditCitaPage",props:{cita:{}},emits:["close"],setup(w,{emit:C}){const i=m([]),c=m([]),u=m(""),b=w,a=C,M=m(!1),p=m(""),f=m(""),n=B({id_cita:0,fecha:"",hora:"",paciente:{id_paciente:0,nombrePaciente:"",apellidoPaciente:"",fechaNacimiento:"",generoPaciente:"",correoPaciente:"",telefonoPaciente:"",direccionPaciente:"",passwordPaciente:""},medico:{id_medico:0,nombreMedico:"",apellidoMedico:"",especialidadMedico:"",telefonoMedico:"",correoMedico:""}}),h=o=>{const t=Number(o.target.value),s=c.value.find(l=>l.id_medico===t);s&&(n.medico=s)},g=()=>({fecha:n.fecha,hora:n.hora,id_medico:n.medico});S(()=>b.cita,o=>{if(o){Object.assign(n,o);const t=c.value.find(s=>s.id_medico===o.medico.id_medico);t&&(n.medico=t)}});const L=()=>{a("close",{message:p.value,type:f.value})};async function $(){M.value=!0;const o={...g(),hora:j(n.hora)};console.log(o);try{const t=g(),s=await k.put(`http://localhost:8080/Cita/ActualizarCita/${n.id_cita}`,o);s.status>=200&&s.status<300&&(p.value="Paciente actualizado exitosamente",f.value="success")}catch(t){if(t.response){const s=t.response.data;t.response.status===409?p.value=s:p.value="Error al actualizar: "+s,f.value="error",console.log(p.value,f.value)}else t.request?(console.error("No se recibió respuesta del servidor:",t.request),p.value="No se recibió respuesta del servidor",f.value="error"):(console.error("Error en la solicitud:",t.message),p.value=`Error en la solicitud: ${t.message}`,f.value="error")}finally{setTimeout(()=>{M.value=!1,L()},2e3)}}const j=o=>o.length===5?`${o}:00`:o,T=async()=>{try{const o=await k.get("http://localhost:8080/Medico/ListadoMedico");i.value=o.data}catch(o){console.error("Error al obtener los médicos:",o)}},_=async()=>{if(u.value)try{const o=encodeURIComponent(u.value),t=await k.get(`http://localhost:8080/Medico/ListadoMedico/Especialidad/${o}`);c.value=t.data}catch(o){console.error("Error al obtener médicos por especialidad:",o)}else c.value=i.value},z=o=>{const t=o.target.value,s=new Date(t),l=new Date;l.setDate(l.getDate()),s<=l&&(alert("La fecha seleccionada debe ser al menos un día después de la fecha actual."),n.fecha=""),n.fecha=t};return A(()=>{T(),Object.assign(n,b.cita)}),(o,t)=>{const s=U("FormKit");return v(),y(E,null,[e("div",W,[e("div",R,[t[8]||(t[8]=e("h2",{class:"text-2xl font-semibold mb-4 text-center text-black"},"Editar cita",-1)),x(s,{type:"form",onSubmit:$,class:"space-y-6",actions:!1},{default:P(()=>[x(s,{type:"date",name:"fecha",label:"Fecha",onBlur:z,modelValue:n.fecha,"onUpdate:modelValue":t[0]||(t[0]=l=>n.fecha=l),"input-class":"mt-1 block w-full p-2 border border-gray-300 rounded-md text-black",validation:"required","validation-messages":{required:"La fecha es obligatoria."}},null,8,["modelValue"]),t[5]||(t[5]=e("br",null,null,-1)),x(s,{type:"time",name:"hora",label:"Hora de la Cita",modelValue:n.hora,"onUpdate:modelValue":t[1]||(t[1]=l=>n.hora=l),"input-class":"mt-1 block w-full p-2 border border-gray-300 rounded-md text-black",validation:"required","validation-messages":{required:"La hora es obligatoria."}},null,8,["modelValue"]),t[6]||(t[6]=e("br",null,null,-1)),t[7]||(t[7]=e("br",null,null,-1)),e("div",J,[e("div",Q,[x(s,{type:"select",name:"especialidad",label:"Especialidad",modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=l=>u.value=l),"input-class":"mt-1 block w-full p-2 border border-gray-300 rounded-md text-black",validation:"required","input-error-class":"border-red-500","validation-messages":{required:"La especialidad es obligatoria."}},{default:P(()=>[t[3]||(t[3]=e("option",{disabled:"",value:""},"Seleccione una especialidad",-1)),(v(!0),y(E,null,q(V(I),l=>(v(),y("option",{value:l},r(l),9,X))),256))]),_:1},8,["modelValue"]),e("button",{type:"button",onClick:_,class:"w-20 py-2 px-4 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition duration-300"}," Filtrar ")]),x(s,{type:"select",name:"medico",label:"Médico",onChange:h,"input-class":"mt-1 block w-full p-2 border border-gray-300 rounded-md text-black",validation:"required","validation-messages":{required:"Seleccione un médico."}},{default:P(()=>[t[4]||(t[4]=e("option",{disabled:"",value:"0"},"Seleccione un médico",-1)),(v(!0),y(E,null,q(c.value,l=>(v(),y("option",{key:l.id_medico,value:l.id_medico},r(l.nombreMedico)+" "+r(l.apellidoMedico),9,Y))),128))]),_:1})])]),_:1}),t[9]||(t[9]=e("br",null,null,-1)),e("div",{class:"flex justify-end space-x-4"},[e("button",{type:"button",onClick:L,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition"},"Cancelar"),e("button",{type:"submit",onClick:$,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"},"Guardar")])])]),x(V(F),{active:M.value,"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});export{oe as _,ie as a,le as b};
