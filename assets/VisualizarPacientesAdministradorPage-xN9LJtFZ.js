import{_ as L,a as U,b as F}from"./ViewIcon-OR__3BWO.js";import{a as C,L as q}from"./index-Cyx9wH0p.js";/* empty css              */import{N as B}from"./NotificationModal-BRD1dcli.js";import{d as E,e as c,f as O,z as W,o as f,c as y,a as e,b,w as G,u as M,F as _,r as K,y as T,h as x,t as m,m as S,s as H,x as J}from"./index-ZwJaeH-t.js";const Q={class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},R={class:"bg-gray-100 rounded-lg shadow-lg w-2/3 p-6 text-black"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Z=E({__name:"EditPacientePage",props:{paciente:{}},emits:["close"],setup(V,{emit:P}){const u=V,r=P,i=c(!1),t=c(""),d=c(""),a=O({id_paciente:0,nombrePaciente:"",apellidoPaciente:"",fechaNacimiento:"",generoPaciente:"",correoPaciente:"",telefonoPaciente:"",direccionPaciente:"",passwordPaciente:""}),h=()=>({nombre:a.nombrePaciente,apellido:a.apellidoPaciente,fechaNacimiento:a.fechaNacimiento,correo:a.correoPaciente,telefono:a.telefonoPaciente,direccion:a.direccionPaciente});Object.assign(a,u.paciente),W(()=>u.paciente,s=>{s&&Object.assign(a,s)});const w=()=>{r("close",{message:t.value,type:d.value})};async function g(){i.value=!0;try{const s=h(),l=await C.put(`http://localhost:8080/Paciente/ActualizarPaciente/${a.id_paciente}`,s);l.status>=200&&l.status<300&&(t.value="Paciente actualizado exitosamente",d.value="success")}catch(s){if(s.response){const l=s.response.data;s.response.status===409?t.value=l:t.value="Error al actualizar: "+l,d.value="error",console.log(t.value,d.value)}else s.request?(console.error("No se recibió respuesta del servidor:",s.request),t.value="No se recibió respuesta del servidor",d.value="error"):(console.error("Error en la solicitud:",s.message),t.value=`Error en la solicitud: ${s.message}`,d.value="error")}finally{setTimeout(()=>{i.value=!1,w()},2e3)}}return(s,l)=>{const v=K("FormKit");return f(),y(_,null,[e("div",Q,[e("div",R,[l[7]||(l[7]=e("h2",{class:"text-2xl font-semibold mb-4 text-center text-black"},"Editar Paciente",-1)),b(v,{type:"form",onSubmit:g,class:"space-y-6",actions:!1},{default:G(()=>[e("div",X,[b(v,{type:"text",name:"nombre",label:"Nombre",modelValue:a.nombrePaciente,"onUpdate:modelValue":l[0]||(l[0]=p=>a.nombrePaciente=p),"input-class":"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",validation:"required","input-error-class":"border-red-500","validation-class":"text-red-500 text-sm mt-1","validation-visibility":"blur","validation-messages":{required:"El nombre es obligatorio."},placeholder:"Ingrese el nombre"},null,8,["modelValue"]),b(v,{type:"text",name:"apellido",label:"Apellido",modelValue:a.apellidoPaciente,"onUpdate:modelValue":l[1]||(l[1]=p=>a.apellidoPaciente=p),"input-class":"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",validation:"required","input-error-class":"border-red-500","validation-class":"text-red-500 text-sm mt-1","validation-visibility":"blur","validation-messages":{required:"El apellido es obligatorio."},placeholder:"Ingrese el apellido"},null,8,["modelValue"]),b(v,{type:"date",name:"fechaNacimiento",label:"Fecha de Nacimiento",modelValue:a.fechaNacimiento,"onUpdate:modelValue":l[2]||(l[2]=p=>a.fechaNacimiento=p),"input-class":"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",validation:"required","input-error-class":"border-red-500","validation-class":"text-red-500 text-sm mt-1","validation-visibility":"blur","validation-messages":{required:"La fecha de nacimiento es obligatoria."}},null,8,["modelValue"]),b(v,{type:"email",name:"correo",label:"Correo Electrónico",modelValue:a.correoPaciente,"onUpdate:modelValue":l[3]||(l[3]=p=>a.correoPaciente=p),"input-class":"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",validation:"required|email","input-error-class":"border-red-500","validation-class":"text-red-500 text-sm mt-1","validation-visibility":"blur","validation-messages":{required:"El correo es obligatorio.",email:"Ingrese un correo válido."},placeholder:"Ingrese el correo electrónico"},null,8,["modelValue"])]),l[6]||(l[6]=e("br",null,null,-1)),e("div",Y,[b(v,{type:"tel",name:"telefono",label:"Teléfono",modelValue:a.telefonoPaciente,"onUpdate:modelValue":l[4]||(l[4]=p=>a.telefonoPaciente=p),modelModifiers:{trim:!0},"input-class":"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black","input-error-class":"border-red-500","validation-class":"text-red-500 text-sm mt-1",validation:"required|matches:/^[0-9]{3}-[0-9]{3}-[0-9]{4}$/","validation-messages":{required:"El teléfono es obligatorio.",matches:"El formato debe ser xxx-xxx-xxxx"},placeholder:"000-000-000"},null,8,["modelValue"]),b(v,{type:"text",name:"direccion",label:"Dirección",modelValue:a.direccionPaciente,"onUpdate:modelValue":l[5]||(l[5]=p=>a.direccionPaciente=p),"input-class":"mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",validation:"required","input-error-class":"border-red-500","validation-class":"text-red-500 text-sm mt-1","validation-visibility":"blur","validation-messages":{required:"La dirección es obligatoria."},placeholder:"Ingrese la dirección"},null,8,["modelValue"])])]),_:1}),l[8]||(l[8]=e("br",null,null,-1)),e("div",{class:"flex justify-end space-x-4"},[e("button",{type:"button",onClick:w,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition"},"Cancelar"),e("button",{type:"submit",onClick:g,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"},"Guardar")])])]),b(M(q),{active:i.value,"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}}),ee={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},te=E({__name:"NotificationDeletePacienteModal",props:{isVisible:{type:Boolean},paciente:{}},emits:["confirm","cancel"],setup(V,{emit:P}){const u=V,r=c(""),i=c(""),t=c(!1),d=P,a=()=>{console.log(u.paciente.id_paciente),g()},h=()=>{d("cancel")},w=()=>{d("confirm",{message:r.value,type:i.value})},g=async()=>{t.value=!0;const s=`http://localhost:8080/Paciente/EliminarPaciente/${u.paciente.id_paciente}`;try{await C.delete(s),r.value="Paciente eliminado con éxito",i.value="success"}catch{r.value="Error al eliminar el paciente, tiene una cita pendiente",i.value="error"}finally{setTimeout(()=>{t.value=!1,w()},2e3)}};return(s,l)=>(f(),y(_,null,[s.isVisible?(f(),y("div",ee,[e("div",{class:"bg-white p-6 rounded-lg shadow-lg w-96"},[l[0]||(l[0]=e("h3",{class:"text-xl font-semibold mb-4 text-red-600"},"Alerta",-1)),l[1]||(l[1]=e("p",{class:"mb-6 text-center text-black"},"¿Estás seguro de la eliminación?",-1)),e("div",{class:"flex justify-end space-x-4"},[e("button",{onClick:h,class:"px-4 py-2 bg-gray-500 rounded-md"},"Cancelar"),e("button",{onClick:a,class:"px-4 py-2 bg-red-600 text-white rounded-md"},"Aceptar")])])])):T("",!0),b(M(q),{active:t.value,"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64))}}),le={key:0,class:"fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50"},oe={class:"bg-white rounded-lg shadow-lg w-11/12 md:w-1/3 p-6"},ae={class:"text-gray-700 space-y-2"},ie=E({__name:"ViewPacientePage",props:{paciente:{},isVisible:{type:Boolean}},emits:["close"],setup(V,{emit:P}){const u=P;function r(){u("close")}return(i,t)=>i.isVisible?(f(),y("div",le,[e("div",oe,[t[9]||(t[9]=e("h2",{class:"text-xl font-semibold text-black mb-4 text-center"},"Detalles del Paciente",-1)),e("ul",ae,[e("li",null,[t[0]||(t[0]=e("strong",null,"ID:",-1)),x(" "+m(i.paciente.id_paciente),1)]),e("li",null,[t[1]||(t[1]=e("strong",null,"Nombre:",-1)),x(" "+m(i.paciente.nombrePaciente),1)]),e("li",null,[t[2]||(t[2]=e("strong",null,"Apellido:",-1)),x(" "+m(i.paciente.apellidoPaciente),1)]),e("li",null,[t[3]||(t[3]=e("strong",null,"Fecha de Nacimiento:",-1)),x(" "+m(i.paciente.fechaNacimiento),1)]),e("li",null,[t[4]||(t[4]=e("strong",null,"Género:",-1)),x(" "+m(i.paciente.generoPaciente),1)]),e("li",null,[t[5]||(t[5]=e("strong",null,"Correo:",-1)),x(" "+m(i.paciente.correoPaciente),1)]),e("li",null,[t[6]||(t[6]=e("strong",null,"Teléfono:",-1)),x(" "+m(i.paciente.telefonoPaciente),1)]),e("li",null,[t[7]||(t[7]=e("strong",null,"Dirección:",-1)),x(" "+m(i.paciente.direccionPaciente),1)]),e("li",null,[t[8]||(t[8]=e("strong",null,"Contraseña:",-1)),x(" "+m(i.paciente.passwordPaciente),1)])]),e("div",{class:"mt-6 flex justify-center"},[e("button",{onClick:r,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400"}," Aceptar ")])])])):T("",!0)}}),se={class:"flex flex-col"},ne={class:"overflow-x-auto"},re={class:"min-w-full inline-block align-middle"},ce={class:"overflow-hidden"},de={class:"min-w-full rounded-xl"},ue={key:0,class:"divide-y divide-gray-300"},pe={class:"p-5"},me={class:"p-5"},be={class:"p-5"},fe={class:"p-5"},ge={class:"p-5 flex items-center space-x-3"},ve=["onClick"],xe=["onClick"],ye=["onClick"],Pe={key:1},he="http://localhost:8080/Paciente/ListadoPaciente",Ee=E({__name:"VisualizarPacientesAdministradorPage",setup(V){const P=c([]),u=c(!1),r=c(""),i=c(""),t=c(!1),d=c(!1),a=c(!1),h=c(!1),w=c(!1),g=c({apellidoPaciente:"",correoPaciente:"",direccionPaciente:"",fechaNacimiento:"",generoPaciente:"",id_paciente:0,nombrePaciente:"",passwordPaciente:"",telefonoPaciente:""}),s=o=>{a.value=!1,o&&o.message&&o.type?(r.value=o.message,i.value=o.type,t.value=!0,$()):t.value=!1},l=()=>{h.value=!1},v=o=>{h.value=!1,o&&o.message&&o.type?(r.value=o.message,i.value=o.type,t.value=!0,$()):t.value=!1},p=async o=>{N(o),setTimeout(()=>{u.value=!1,a.value=!0},1e3)};async function N(o){u.value=!0;try{const n=await C.get(`http://localhost:8080/Paciente/ListadoPaciente/${o.id_paciente}`);Object.assign(g.value,n.data)}catch(n){C.isAxiosError(n)&&n.response?r.value=`Error al obtener los datos del paciente: ${n.response.data.message||n.message}`:r.value=`Error al obtener los datos del paciente: ${n instanceof Error?n.message:"Error desconocido"}`,i.value="error",t.value=!0}}const D=o=>{N(o),setTimeout(()=>{u.value=!1,h.value=!0},1e3)},j=o=>{N(o),setTimeout(()=>{u.value=!1,w.value=!0},1e3)},A=()=>{w.value=!1};async function $(){try{const o=await C.get(he);P.value=o.data,o.data&&o.data.length>0?d.value=!0:d.value=!1}catch(o){d.value=!1,o.response?(r.value=o.response.data||"Error en el registro",i.value="error",t.value=!0):o.request?(r.value="No se recibió respuesta del servidor",i.value="error",t.value=!0):(r.value=`Error en la solicitud: ${o.message}`,i.value="error",t.value=!0)}}return S(()=>{$()}),(o,n)=>(f(),y(_,null,[b(B,{message:r.value,type:i.value,visible:t.value,"onUpdate:visible":n[0]||(n[0]=k=>t.value=!1)},null,8,["message","type","visible"]),e("div",se,[e("div",ne,[e("div",re,[n[3]||(n[3]=e("div",{class:"relative text-gray-500 focus-within:text-gray-900 mb-4"},[e("div",{class:"absolute inset-y-0 left-1 flex items-center pl-3 pointer-events-none"})],-1)),e("div",ce,[e("table",de,[n[2]||(n[2]=e("thead",null,[e("tr",{class:"bg-gray-300"},[e("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize rounded-t-xl"}," Nombre "),e("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Apellido "),e("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Télefono "),e("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Correo "),e("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize rounded-t-xl"},"Acciones ")])],-1)),d.value?(f(),y("tbody",ue,[(f(!0),y(_,null,H(P.value,(k,I)=>(f(),y("tr",{key:I},[e("td",pe,m(k.nombrePaciente),1),e("td",me,m(k.apellidoPaciente),1),e("td",be,m(k.telefonoPaciente),1),e("td",fe,m(k.correoPaciente),1),e("td",ge,[e("img",{src:L,alt:"Edit Icon",onClick:z=>p(k),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-blue-200 hover:bg-blue-400 rounded-md"},null,8,ve),e("img",{src:U,alt:"Delete Icon",onClick:z=>D(k),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-red-200 hover:bg-red-400 rounded-md"},null,8,xe),e("img",{src:F,alt:"View Icon",onClick:z=>j(k),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-green-200 hover:bg-green-400 rounded-md"},null,8,ye)])]))),128))])):(f(),y("tbody",Pe,n[1]||(n[1]=[e("tr",null,[e("td",{colspan:"5",class:"text-center p-5"},[e("h1",{class:"text-xl font-semibold text-gray-500"},"No se encontraron registros"),e("p",{class:"text-gray-400 mt-2"},"Intenta ajustar tus filtros o buscar de nuevo.")])],-1)])))])])])])]),b(te,{isVisible:h.value,onConfirm:v,onCancel:l,paciente:g.value},null,8,["isVisible","paciente"]),a.value?(f(),J(Z,{key:0,paciente:g.value,onClose:s},null,8,["paciente"])):T("",!0),b(ie,{"is-visible":w.value,paciente:g.value,onClose:A},null,8,["is-visible","paciente"]),b(M(q),{active:u.value,"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64))}});export{Ee as default};
