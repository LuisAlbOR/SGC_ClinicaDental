import{_ as B,a as I,b as T}from"./ViewIcon-OR__3BWO.js";import{a as x,L as q}from"./index-Cyx9wH0p.js";/* empty css              */import{N as F}from"./NotificationModal-BRD1dcli.js";import{_ as j,a as A,b as O}from"./EditCitaPage.vue_vue_type_script_setup_true_lang-WRmIziBn.js";import{d as U,e as a,m as H,o as r,c as d,a as t,F as w,s as R,b as v,u as S,x as W,y as G,q as J,t as p}from"./index-ZwJaeH-t.js";import"./Especialidades-Cb2kmacW.js";const K={class:"flex flex-col"},Q={class:"overflow-x-auto"},X={class:"min-w-full inline-block align-middle"},Y={class:"overflow-hidden"},Z={class:"min-w-full rounded-xl"},ee={key:0,class:"divide-y divide-gray-300"},te={class:"p-5"},se={class:"p-5"},oe={class:"p-5"},ae={class:"p-5"},le={class:"p-5 flex items-center space-x-3"},ie=["onClick"],ne=["onClick"],re=["onClick"],ce={key:1},be=U({__name:"VisualizarCitaPacientePage",setup(de){const M=J(),k=`http://localhost:8080/Cita/ObtenerCitasPorPaciente/${Number(M.query.id)}`,y=a([]),l=a(""),n=a(""),o=a(!1),u=a(!1),g=a(!1),f=a(!1),h=a(!1),m=a({id_cita:0,fecha:"",hora:"",paciente:{id_paciente:0,nombrePaciente:"",apellidoPaciente:"",fechaNacimiento:"",generoPaciente:"",correoPaciente:"",telefonoPaciente:"",direccionPaciente:"",passwordPaciente:""},medico:{id_medico:0,nombreMedico:"",apellidoMedico:"",especialidadMedico:"",telefonoMedico:"",correoMedico:""}}),c=a(!1),P=e=>{g.value=!1,e&&e.message&&e.type?(l.value=e.message,n.value=e.type,o.value=!0,b()):o.value=!1},V=()=>{f.value=!1},E=e=>{f.value=!1,e&&e.message&&e.type?(l.value=e.message,n.value=e.type,o.value=!0,b()):o.value=!1},$=async e=>{_(e),setTimeout(()=>{c.value=!1,g.value=!0},1e3)},N=e=>{_(e),setTimeout(()=>{c.value=!1,h.value=!0},1e3)},z=e=>{_(e),setTimeout(()=>{c.value=!1,f.value=!0},1e3)},D=()=>{h.value=!1};async function _(e){c.value=!0;try{const s=await x.get(`http://localhost:8080/Cita/ListadoCita/${e.id_cita}`);Object.assign(m.value,s.data)}catch(s){x.isAxiosError(s)&&s.response?l.value=`Error al obtener los datos del paciente: ${s.response.data.message||s.message}`:l.value=`Error al obtener los datos del paciente: ${s instanceof Error?s.message:"Error desconocido"}`,n.value="error",o.value=!0}}async function b(){try{const e=await x.get(k);y.value=e.data,e.data&&e.data.length>0?u.value=!0:u.value=!1}catch(e){u.value=!1,e.response?(l.value=e.response.data||"Error en el registro",n.value="error",o.value=!0):e.request?(l.value="No se recibió respuesta del servidor",n.value="error",o.value=!0):(l.value=`Error en la solicitud: ${e.message}`,n.value="error",o.value=!0)}}return H(()=>{b()}),(e,s)=>(r(),d(w,null,[t("div",K,[t("div",Q,[t("div",X,[s[3]||(s[3]=t("div",{class:"relative text-gray-500 focus-within:text-gray-900 mb-4"},[t("div",{class:"absolute inset-y-0 left-1 flex items-center pl-3 pointer-events-none"})],-1)),t("div",Y,[t("table",Z,[s[2]||(s[2]=t("thead",null,[t("tr",{class:"bg-gray-300"},[t("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize rounded-t-xl"}," Fecha "),t("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Hora "),t("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Paciente "),t("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"}," Médico "),t("th",{scope:"col",class:"p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize rounded-t-xl"}," Acciones ")])],-1)),u.value?(r(),d("tbody",ee,[(r(!0),d(w,null,R(y.value,(i,L)=>(r(),d("tr",{key:L},[t("td",te,p(i.fecha),1),t("td",se,p(i.hora),1),t("td",oe,p(i.paciente.nombrePaciente),1),t("td",ae,p(i.medico.nombreMedico),1),t("td",le,[t("img",{src:B,alt:"Edit Icon",onClick:C=>$(i),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-blue-200 hover:bg-blue-400 rounded-md"},null,8,ie),t("img",{src:I,alt:"Delete Icon",onClick:C=>z(i),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-red-200 hover:bg-red-400 rounded-md"},null,8,ne),t("img",{src:T,alt:"View Icon",onClick:C=>N(i),class:"w-6 h-6 cursor-pointer filter drop-shadow-lg transition-transform duration-200 ease-in-out transform hover:scale-125 bg-green-200 hover:bg-green-400 rounded-md"},null,8,re)])]))),128))])):(r(),d("tbody",ce,s[1]||(s[1]=[t("tr",null,[t("td",{colspan:"5",class:"text-center p-5"},[t("h1",{class:"text-xl font-semibold text-gray-500"},"No se encontraron registros"),t("p",{class:"text-gray-400 mt-2"},"Intenta ajustar tus filtros o buscar de nuevo.")])],-1)])))])])])])]),v(F,{message:l.value,type:n.value,visible:o.value,"onUpdate:visible":s[0]||(s[0]=i=>o.value=!1)},null,8,["message","type","visible"]),v(j,{"is-visible":h.value,cita:m.value,onClose:D},null,8,["is-visible","cita"]),v(S(q),{active:c.value,"can-cancel":!0,"is-full-page":!0},null,8,["active"]),v(A,{isVisible:f.value,onConfirm:E,onCancel:V,cita:m.value},null,8,["isVisible","cita"]),g.value?(r(),W(O,{key:0,cita:m.value,onClose:P},null,8,["cita"])):G("",!0)],64))}});export{be as default};
